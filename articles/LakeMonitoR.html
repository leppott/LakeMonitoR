<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LakeMonitoR Examples • LakeMonitoR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="LakeMonitoR Examples">
<meta property="og:description" content="LakeMonitoR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LakeMonitoR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9016</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/LakeMonitoR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leppott/LakeMonitoR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="LakeMonitoR_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>LakeMonitoR Examples</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leppott/LakeMonitoR/blob/master/vignettes/LakeMonitoR.Rmd"><code>vignettes/LakeMonitoR.Rmd</code></a></small>
      <div class="hidden name"><code>LakeMonitoR.Rmd</code></div>

    </div>

    
    
<div id="purpose" class="section level1">
<h1 class="hasAnchor">
<a href="#purpose" class="anchor"></a>Purpose</h1>
<p>Show users how to use functions in <code>LakeMonitoR</code> and those from <code>rLakeAnalyzer</code>.</p>
<p>For rLakeAnalyzer examples, in most cases, are using examples provided by <code>rLakeAnalyzer</code>.</p>
</div>
<div id="lakemonitor" class="section level1">
<h1 class="hasAnchor">
<a href="#lakemonitor" class="anchor"></a>LakeMonitoR</h1>
<div id="agg_depth_files" class="section level2">
<h2 class="hasAnchor">
<a href="#agg_depth_files" class="anchor"></a>agg_depth_files</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Data Files</span>
<span class="va">myFile_import</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ellis--1.0m_Water_20180524_20180918.csv"</span>
                  , <span class="st">"Ellis--3.0m_Water_20180524_20180918.csv"</span><span class="op">)</span>
<span class="va">myFile_export</span> <span class="op">&lt;-</span> <span class="st">"Ellis--Combined_Water_20180524_20180918.csv"</span>
<span class="va">myDir_import</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"LakeMonitoR"</span><span class="op">)</span><span class="op">)</span>
<span class="va">myDir_export</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="../reference/agg_depth_files.html">agg_depth_files</a></span><span class="op">(</span>filename_import <span class="op">=</span> <span class="va">myFile_import</span>
                , filename_export <span class="op">=</span> <span class="va">myFile_export</span>
                , dir_import <span class="op">=</span> <span class="va">myDir_import</span>
                , dir_export <span class="op">=</span> <span class="va">myDir_export</span><span class="op">)</span></code></pre></div>
</div>
<div id="daily_depth_means" class="section level2">
<h2 class="hasAnchor">
<a href="#daily_depth_means" class="anchor"></a>daily_depth_means</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/xts">xts</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: zoo</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'zoo'</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     as.Date, as.Date.numeric</span>

<span class="co"># Lake Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp</span>

<span class="co"># Filter by any QC fields</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">FlagV</span> <span class="op">==</span> <span class="st">"P"</span>, <span class="op">]</span>

<span class="co"># name columns</span>
<span class="va">col_siteid</span>   <span class="op">&lt;-</span> <span class="st">"SiteID"</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date_Time"</span>
<span class="va">col_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth_m"</span>
<span class="va">col_measure</span>  <span class="op">&lt;-</span> <span class="st">"Water_Temp_C"</span>

<span class="co"># run function</span>
<span class="va">data_ddm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/daily_depth_means.html">daily_depth_means</a></span><span class="op">(</span><span class="va">data</span>
                             , <span class="va">col_siteid</span>
                             , <span class="va">col_datetime</span>
                             , <span class="va">col_depth</span>
                             , <span class="va">col_measure</span><span class="op">)</span>

<span class="co"># summary</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">data_ddm</span><span class="op">)</span>
<span class="co">#&gt;       Date                Depth     Measurement     </span>
<span class="co">#&gt;  Min.   :2017-01-19   Min.   : 2   Min.   : 0.3707  </span>
<span class="co">#&gt;  1st Qu.:2017-04-18   1st Qu.: 8   1st Qu.: 2.0038  </span>
<span class="co">#&gt;  Median :2017-07-16   Median :15   Median : 4.8166  </span>
<span class="co">#&gt;  Mean   :2017-07-16   Mean   :15   Mean   : 6.1513  </span>
<span class="co">#&gt;  3rd Qu.:2017-10-13   3rd Qu.:22   3rd Qu.: 8.5071  </span>
<span class="co">#&gt;  Max.   :2018-01-10   Max.   :28   Max.   :22.0829</span></code></pre></div>
</div>
<div id="lake_summary_stats" class="section level2">
<h2 class="hasAnchor">
<a href="#lake_summary_stats" class="anchor"></a>lake_summary_stats</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>

<span class="co"># Columns</span>
<span class="va">col_date</span>    <span class="op">&lt;-</span> <span class="st">"Date"</span>
<span class="va">col_depth</span>   <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span> <span class="op">&lt;-</span> <span class="st">"Measurement"</span>
<span class="va">below_threshold</span> <span class="op">&lt;-</span> <span class="fl">2</span>

<span class="co"># Calculate Stratification</span>
<span class="va">df_lss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lake_summary_stats.html">lake_summary_stats</a></span><span class="op">(</span><span class="va">data</span>
                            , <span class="va">col_date</span>
                            , <span class="va">col_depth</span>
                            , <span class="va">col_measure</span>
                            , <span class="va">below_threshold</span><span class="op">)</span>

<span class="co"># Results</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">df_lss</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 23</span>
<span class="co">#&gt; # Groups:   TimeFrame_Value, Depth [6]</span>
<span class="co">#&gt;   TimeFrame_Name TimeFrame_Value Depth     n ndays  mean median   min   max</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 AllData        AllData             2   357   357  8.50   4.91 0.371  22.1</span>
<span class="co">#&gt; 2 AllData        AllData             3   357   357  8.49   4.93 0.413  22.0</span>
<span class="co">#&gt; 3 AllData        AllData             4   357   357  8.41   4.91 0.404  21.9</span>
<span class="co">#&gt; 4 AllData        AllData             5   357   357  8.32   4.88 0.395  21.8</span>
<span class="co">#&gt; 5 AllData        AllData             6   357   357  8.20   4.86 0.389  20.9</span>
<span class="co">#&gt; 6 AllData        AllData             7   357   357  8.02   4.87 0.401  19.9</span>
<span class="co">#&gt; # … with 14 more variables: range &lt;dbl&gt;, sd &lt;dbl&gt;, var &lt;dbl&gt;, cv &lt;dbl&gt;,</span>
<span class="co">#&gt; #   q01 &lt;dbl&gt;, q05 &lt;dbl&gt;, q10 &lt;dbl&gt;, q25 &lt;dbl&gt;, q50 &lt;dbl&gt;, q75 &lt;dbl&gt;,</span>
<span class="co">#&gt; #   q90 &lt;dbl&gt;, q95 &lt;dbl&gt;, q99 &lt;dbl&gt;, n_below_2 &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="plot_depth" class="section level2">
<h2 class="hasAnchor">
<a href="#plot_depth" class="anchor"></a>plot_depth</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Data (Test Lake)</span>
<span class="va">data</span>         <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># Column Names</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span>  <span class="op">&lt;-</span> <span class="st">"temp_F"</span>

<span class="co"># Plot Labels</span>
<span class="va">lab_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date Time"</span>
<span class="va">lab_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth (m)"</span>
<span class="va">lab_measure</span>  <span class="op">&lt;-</span> <span class="st">"Temperature (F)"</span>
<span class="va">lab_title</span>    <span class="op">&lt;-</span> <span class="st">"Test Lake"</span>

<span class="co"># Create Plot</span>
<span class="va">p_profile</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_depth.html">plot_depth</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                        , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                        , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                        , col_measure <span class="op">=</span> <span class="va">col_measure</span>
                        , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                        , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                        , lab_measure <span class="op">=</span> <span class="va">lab_measure</span>
                        , lab_title <span class="op">=</span> <span class="va">lab_title</span><span class="op">)</span>

<span class="co"># Print Plot</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_profile</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_depth-1.png" width="512"></p>
<p>The function is generic and can plot other variables if present.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Data (Test Lake)</span>
<span class="va">data</span>         <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># Column Names</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span>  <span class="op">&lt;-</span> <span class="st">"DO_conc"</span>

<span class="co"># Plot Labels</span>
<span class="va">lab_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date Time"</span>
<span class="va">lab_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth (m)"</span>
<span class="va">lab_measure</span>  <span class="op">&lt;-</span> <span class="st">"Dissolved Oxygen (mg/L)"</span>
<span class="va">lab_title</span>    <span class="op">&lt;-</span> <span class="st">"Test Lake"</span>

<span class="co"># Create Plot</span>
<span class="va">p_profile2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_depth.html">plot_depth</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                        , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                        , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                        , col_measure <span class="op">=</span> <span class="va">col_measure</span>
                        , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                        , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                        , lab_measure <span class="op">=</span> <span class="va">lab_measure</span>
                        , lab_title <span class="op">=</span> <span class="va">lab_title</span><span class="op">)</span>

<span class="co"># Print Plot</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_profile2</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_depth_do-1.png" width="512"></p>
</div>
<div id="plot_heatmap" class="section level2">
<h2 class="hasAnchor">
<a href="#plot_heatmap" class="anchor"></a>plot_heatmap</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Data (Test Lake)</span>
<span class="va">data</span>         <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># Column Names</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span>  <span class="op">&lt;-</span> <span class="st">"temp_F"</span>

<span class="co"># Plot Labels</span>
<span class="va">lab_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date Time"</span>
<span class="va">lab_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth (m)"</span>
<span class="va">lab_measure</span>  <span class="op">&lt;-</span> <span class="st">"Temperature (F)"</span>
<span class="va">lab_title</span>    <span class="op">&lt;-</span> <span class="st">"Test Lake"</span>
<span class="va">line_val</span>     <span class="op">&lt;-</span> <span class="fl">2</span>

<span class="co"># Create Plot</span>
<span class="va">p_hm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_heatmap.html">plot_heatmap</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                        , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                        , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                        , col_measure <span class="op">=</span> <span class="va">col_measure</span>
                        , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                        , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                        , lab_measure <span class="op">=</span> <span class="va">lab_measure</span>
                        , lab_title <span class="op">=</span> <span class="va">lab_title</span>
                        , contours <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Print Plot</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_hm</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_heatmap-1.png" width="512"></p>
</div>
<div id="plot_ts" class="section level2">
<h2 class="hasAnchor">
<a href="#plot_ts" class="anchor"></a>plot_ts</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Data (Test Lake)</span>
<span class="va">data</span>         <span class="op">&lt;-</span> <span class="va">laketest_wind</span>

<span class="co"># Column Names</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_measure</span>  <span class="op">&lt;-</span> <span class="st">"WSPD"</span>

<span class="co"># Plot Labels</span>
<span class="va">lab_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date Time"</span>
<span class="va">lab_measure</span>  <span class="op">&lt;-</span> <span class="st">"Average Wind Speed (m/s)"</span>
<span class="va">lab_title</span>    <span class="op">&lt;-</span> <span class="st">"Test Lake"</span>

<span class="co"># Create Plot</span>
<span class="va">p_ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_ts.html">plot_ts</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                , col_measure <span class="op">=</span> <span class="va">col_measure</span>
                , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                , lab_measure <span class="op">=</span> <span class="va">lab_measure</span>
                , lab_title <span class="op">=</span> <span class="va">lab_title</span><span class="op">)</span>

<span class="co"># Print Plot</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_ts</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_ts-1.png" width="512"></p>
</div>
<div id="plot_oxythermal" class="section level2">
<h2 class="hasAnchor">
<a href="#plot_oxythermal" class="anchor"></a>plot_oxythermal</h2>
<p>For oxythermal habitat for coldwater fish a plot that shows depths at which suitable oxythermal habitat exists during deployment period. The user can enter thresholds for temperature and dissolved oxygen.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Data (Test Lake)</span>
<span class="va">data</span>         <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># Column Names</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_temp</span>     <span class="op">&lt;-</span> <span class="st">"temp_F"</span>
<span class="va">col_do</span>       <span class="op">&lt;-</span> <span class="st">"DO_conc"</span>

<span class="co"># Data values</span>
<span class="va">thresh_temp</span> <span class="op">&lt;-</span> <span class="fl">68</span>
<span class="va">operator_temp</span> <span class="op">&lt;-</span> <span class="st">"&lt;="</span>
<span class="va">thresh_do</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="va">operator_do</span> <span class="op">&lt;-</span> <span class="st">"&gt;="</span>

<span class="co"># Plot Labels</span>
<span class="va">lab_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date Time"</span>
<span class="va">lab_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth (m)"</span>
<span class="va">lab_temp</span>     <span class="op">&lt;-</span> <span class="st">"Temp (F)"</span>
<span class="va">lab_title</span>    <span class="op">&lt;-</span> <span class="st">"Test Lake"</span>

<span class="co"># Create Plot</span>
<span class="va">p_ot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_oxythermal.html">plot_oxythermal</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                        , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                        , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                        , col_temp <span class="op">=</span> <span class="va">col_temp</span>
                        , col_do <span class="op">=</span> <span class="va">col_do</span>
                        , thresh_temp <span class="op">=</span> <span class="va">thresh_temp</span>
                        , operator_temp<span class="op">=</span> <span class="va">operator_temp</span>
                        , thresh_do <span class="op">=</span> <span class="va">thresh_do</span>
                        , operator_do <span class="op">=</span> <span class="va">operator_do</span>
                        , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                        , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                        , lab_temp <span class="op">=</span> <span class="va">lab_temp</span>
                        , lab_title <span class="op">=</span> <span class="va">lab_title</span><span class="op">)</span>

<span class="co">## Add Subtitle and Caption</span>
<span class="va">myST</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Temp "</span>, <span class="va">operator_temp</span>, <span class="st">" "</span>, <span class="va">thresh_temp</span>
             , <span class="st">" and DO "</span>, <span class="va">operator_do</span>, <span class="st">" "</span>, <span class="va">thresh_do</span><span class="op">)</span>
<span class="va">p_ot</span> <span class="op">&lt;-</span> <span class="va">p_ot</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="va">myST</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Gray = Areas outside of given temp and DO "</span>
                , <span class="st">"values."</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_ot</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_oxythermal-1.png" width="512"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># For Comparison, heatmaps of Temperature and DO</span>

<span class="co"># heat map, Temp</span>
<span class="va">p_hm_temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_heatmap.html">plot_heatmap</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                    , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                    , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                    , col_measure <span class="op">=</span> <span class="va">col_temp</span>
                    , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                    , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                    , lab_measure <span class="op">=</span> <span class="va">lab_temp</span>
                    , lab_title <span class="op">=</span> <span class="va">lab_title</span>
                    , contours <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_hm_temp</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_oxythermal-2.png" width="512"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># heat map, DO</span>
<span class="va">p_hm_do</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_heatmap.html">plot_heatmap</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                         , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                         , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                         , col_measure <span class="op">=</span> <span class="va">col_do</span>
                         , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                         , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                         , lab_measure <span class="op">=</span> <span class="st">"DO (mg/L)"</span>
                         , lab_title <span class="op">=</span> <span class="va">lab_title</span>
                         , contours <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_hm_do</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_oxythermal-3.png" width="512"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Plot, Combine all 3</span>
<span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">p_ot</span>, <span class="va">p_hm_temp</span>, <span class="va">p_hm_do</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_oxythermal-4.png" width="512"></p>
</div>
<div id="combining-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-plots" class="anchor"></a>Combining Plots</h2>
<p>The shiny app combines the depth plot with the heat map and saves it to the Results folder. Combining the plots is not a default feature of the package but can be done with the use of the <code>gridExtra</code> package.</p>
<p>Move legends to the bottom and remove titles to get more space.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Data (Test Lake)</span>
<span class="va">data</span>         <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># depth----</span>
<span class="co"># Column Names</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span>  <span class="op">&lt;-</span> <span class="st">"DO_conc"</span>

<span class="co"># Plot Labels</span>
<span class="va">lab_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date Time"</span>
<span class="va">lab_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth (m)"</span>
<span class="va">lab_measure</span>  <span class="op">&lt;-</span> <span class="st">"Dissolved Oxygen (mg/L)"</span>
<span class="va">lab_title</span>    <span class="op">&lt;-</span> <span class="st">"Test Lake"</span>

<span class="co"># Create Plot</span>
<span class="va">p_profile</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_depth.html">plot_depth</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                        , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                        , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                        , col_measure <span class="op">=</span> <span class="va">col_measure</span>
                        , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                        , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                        , lab_measure <span class="op">=</span> <span class="va">lab_measure</span>
                        , lab_title <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>

<span class="co"># heat map----</span>
<span class="co"># Data (Test Lake)</span>
<span class="va">data</span>         <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># Column Names</span>
<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span>  <span class="op">&lt;-</span> <span class="st">"temp_F"</span>

<span class="co"># Plot Labels</span>
<span class="va">lab_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date Time"</span>
<span class="va">lab_depth</span>    <span class="op">&lt;-</span> <span class="st">"Depth (m)"</span>
<span class="va">lab_measure</span>  <span class="op">&lt;-</span> <span class="st">"Temperature (F)"</span>
<span class="va">lab_title</span>    <span class="op">&lt;-</span> <span class="st">"Test Lake"</span>
<span class="va">line_val</span>     <span class="op">&lt;-</span> <span class="fl">2</span>

<span class="co"># Create Plot----</span>
<span class="va">p_hm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_heatmap.html">plot_heatmap</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
                        , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                        , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                        , col_measure <span class="op">=</span> <span class="va">col_measure</span>
                        , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                        , lab_depth <span class="op">=</span> <span class="va">lab_depth</span>
                        , lab_measure <span class="op">=</span> <span class="va">lab_measure</span>
                        , lab_title <span class="op">=</span> <span class="cn">NA</span>
                        , contours <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Change legend location</span>
<span class="va">p_profile</span> <span class="op">&lt;-</span> <span class="va">p_profile</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">2</span>
                      , color <span class="op">=</span> <span class="st">"red"</span>
                      , linetype <span class="op">=</span> <span class="st">"dashed"</span>
                      , size <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>
<span class="va">p_hm</span> <span class="op">&lt;-</span> <span class="va">p_hm</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span>

<span class="co"># # plot, Wind</span>
<span class="va">p_ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_ts.html">plot_ts</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">laketest_wind</span>
                , col_datetime <span class="op">=</span> <span class="va">col_datetime</span>
                , col_measure <span class="op">=</span> <span class="st">"WSPD"</span>
                , lab_datetime <span class="op">=</span> <span class="va">lab_datetime</span>
                , lab_measure <span class="op">=</span> <span class="st">"Average Wind (m/s)"</span>
                , lab_title <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>

<span class="co"># Combine 2</span>
<span class="va">p_combo_2</span> <span class="op">&lt;-</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">p_hm</span>, <span class="va">p_profile</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_combine-1.png" width="512"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Combine 3</span>
<span class="va">p_combo_3</span> <span class="op">&lt;-</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">p_hm</span>, <span class="va">p_profile</span>, <span class="va">p_ts</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_combine-2.png" width="512"></p>
</div>
<div id="stratification" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification" class="anchor"></a>stratification</h2>
<p>Stratification is calculated as greater than or equal to a 1 degree C difference over 1-m. <strong>Unless</strong> there are only 2 measurements then stratification is calculated as greater than or equal to a 1 degree C difference (i.e., depth is not considered).</p>
<p>The example below calculates stratification on the entire data set and then again with only the top and bottom measurements. Using only the top and bottom measurements results in more days of stratification and has 1 more event.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co">## Example 1, entire data set</span>

<span class="co"># data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>

<span class="co"># Columns</span>
<span class="va">col_date</span>    <span class="op">&lt;-</span> <span class="st">"Date"</span>
<span class="va">col_depth</span>   <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span> <span class="op">&lt;-</span> <span class="st">"Measurement"</span>

<span class="co"># Calculate Stratification</span>
<span class="va">ls_strat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stratification.html">stratification</a></span><span class="op">(</span><span class="va">data</span>
                           , <span class="va">col_date</span>
                           , <span class="va">col_depth</span>
                           , <span class="va">col_measure</span>
                           , min_days <span class="op">=</span> <span class="fl">1</span> <span class="op">)</span>
<span class="co">#&gt; Warning in stratification(data, col_date, col_depth, col_measure, min_days = 1):</span>
<span class="co">#&gt; NAs introduced by coercion</span>

<span class="co"># Results, Stratification Dates</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ls_strat</span><span class="op">$</span><span class="va">Stratification_Dates</span><span class="op">)</span>
<span class="co">#&gt;         Date Stratified_1</span>
<span class="co">#&gt; 1 2017-01-19        FALSE</span>
<span class="co">#&gt; 2 2017-01-20        FALSE</span>
<span class="co">#&gt; 3 2017-01-21        FALSE</span>
<span class="co">#&gt; 4 2017-01-22        FALSE</span>
<span class="co">#&gt; 5 2017-01-23        FALSE</span>
<span class="co">#&gt; 6 2017-01-24        FALSE</span>

<span class="co"># Results, Stratification Events</span>
<span class="va">ls_strat</span><span class="op">$</span><span class="va">Stratification_Events</span>
<span class="co">#&gt;   Start_Date   End_Date Year Time_Span</span>
<span class="co">#&gt; 1 2017-06-05 2017-10-16 2017  133 days</span>

<span class="co"># Results, Stratification Plot</span>
<span class="va">p_strat</span> <span class="op">&lt;-</span> <span class="va">ls_strat</span><span class="op">$</span><span class="va">Stratification_Plot</span>
<span class="va">p_strat</span> <span class="op">&lt;-</span> <span class="va">p_strat</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Stratification &gt;= "</span>
                                           , <span class="st">"1 deg C difference over 1-m"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_strat</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/stratification-1.png" width="512"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#~~~~~~~~~~~~</span>

<span class="co">## Example 2, only top and bottom measurement</span>

<span class="co"># data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>
<span class="va">min_depth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="va">col_depth</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">max_depth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="va">col_depth</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">data_tb</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">[</span>, <span class="va">col_depth</span><span class="op">]</span> <span class="op">==</span> <span class="va">min_depth</span> <span class="op">|</span>
             <span class="va">data</span><span class="op">[</span>, <span class="va">col_depth</span><span class="op">]</span> <span class="op">==</span> <span class="va">max_depth</span>, <span class="op">]</span>

<span class="co"># Columns</span>
<span class="va">col_date</span>    <span class="op">&lt;-</span> <span class="st">"Date"</span>
<span class="va">col_depth</span>   <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span> <span class="op">&lt;-</span> <span class="st">"Measurement"</span>

<span class="co"># Calculate Stratification</span>
<span class="va">ls_strat_tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stratification.html">stratification</a></span><span class="op">(</span><span class="va">data_tb</span>
                             , <span class="va">col_date</span>
                             , <span class="va">col_depth</span>
                             , <span class="va">col_measure</span>
                             , min_days <span class="op">=</span> <span class="fl">1</span> <span class="op">)</span>
<span class="co">#&gt; Warning in stratification(data_tb, col_date, col_depth, col_measure, min_days =</span>
<span class="co">#&gt; 1): NAs introduced by coercion</span>
<span class="co"># Results, Stratification Dates</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ls_strat_tb</span><span class="op">$</span><span class="va">Stratification_Dates</span><span class="op">)</span>
<span class="co">#&gt;         Date Stratified_1</span>
<span class="co">#&gt; 1 2017-01-19        FALSE</span>
<span class="co">#&gt; 2 2017-01-20        FALSE</span>
<span class="co">#&gt; 3 2017-01-21        FALSE</span>
<span class="co">#&gt; 4 2017-01-22        FALSE</span>
<span class="co">#&gt; 5 2017-01-23        FALSE</span>
<span class="co">#&gt; 6 2017-01-24        FALSE</span>

<span class="co"># Results, Stratification Events</span>
<span class="va">ls_strat_tb</span><span class="op">$</span><span class="va">Stratification_Events</span>
<span class="co">#&gt;   Start_Date   End_Date Year Time_Span</span>
<span class="co">#&gt; 1 2017-05-14 2017-05-20 2017    6 days</span>
<span class="co">#&gt; 2 2017-05-24 2017-10-25 2017  154 days</span>

<span class="co"># Results, Stratification Plot</span>
<span class="va">p_strat_tb</span> <span class="op">&lt;-</span> <span class="va">ls_strat_tb</span><span class="op">$</span><span class="va">Stratification_Plot</span>
<span class="va">p_strat_tb</span> <span class="op">&lt;-</span> <span class="va">p_strat_tb</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Stratification &gt;="</span>
                                          , <span class="st">" 1 deg C (only 2 depths)"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">p_strat_tb</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/stratification-2.png" width="512"> ## TDOx Temperature at Dissolved Oxygen x value.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># Columns</span>
<span class="va">col_date</span>  <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_temp</span>  <span class="op">&lt;-</span> <span class="st">"temp_F"</span>
<span class="va">col_do</span>    <span class="op">&lt;-</span> <span class="st">"DO_conc"</span>
<span class="va">do_x_val</span>  <span class="op">&lt;-</span> <span class="fl">3</span>

<span class="va">tdox_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tdox.html">tdox</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>
               , col_date <span class="op">=</span> <span class="va">col_date</span>
               , col_depth <span class="op">=</span> <span class="va">col_depth</span>
               , col_temp <span class="op">=</span> <span class="va">col_temp</span>
               , col_do <span class="op">=</span> <span class="va">col_do</span>
               , do_x_val <span class="op">=</span> <span class="va">do_x_val</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tdox_3</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 6</span>
<span class="co">#&gt;   TimeFrame_Name TimeFrame_Value TDO_x_value   min  mean   max</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;                 &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Year           2018                      3  50.9  59.9  64.2</span>
<span class="co">#&gt; 2 Date           2018-07-02                3  52.6  52.6  52.6</span>
<span class="co">#&gt; 3 Date           2018-07-03                3  53.5  53.5  53.5</span>
<span class="co">#&gt; 4 Date           2018-07-04                3  53.7  53.7  53.7</span>
<span class="co">#&gt; 5 Date           2018-07-05                3  54.4  54.4  54.4</span>
<span class="co">#&gt; 6 Date           2018-07-06                3  54.8  54.8  54.8</span></code></pre></div>
<p>Example plot of a single depth using base R graphics.</p>
<p>Temperature is in black and Dissolved Oxygen is in blue.</p>
<p>Dotted lines are DO = 3 and Temperature = 53.7 (TDO3 value).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketest</span>

<span class="co"># Columns</span>
<span class="va">col_date</span>  <span class="op">&lt;-</span> <span class="st">"Date.Time"</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_temp</span>  <span class="op">&lt;-</span> <span class="st">"temp_F"</span>
<span class="va">col_do</span>    <span class="op">&lt;-</span> <span class="st">"DO_conc"</span>
<span class="va">do_x_val</span>  <span class="op">&lt;-</span> <span class="fl">3</span>

<span class="va">df_plot</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">[</span>, <span class="st">"Date.Time"</span><span class="op">]</span> <span class="op">==</span> <span class="st">"2018-07-03 12:00"</span>, <span class="op">]</span>

<span class="va">tdox_3_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tdox.html">tdox</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_plot</span>
                    , col_date <span class="op">=</span> <span class="va">col_date</span>
                    , col_depth <span class="op">=</span> <span class="va">col_depth</span>
                    , col_temp <span class="op">=</span> <span class="va">col_temp</span>
                    , col_do <span class="op">=</span> <span class="va">col_do</span>
                    , do_x_val <span class="op">=</span> <span class="va">do_x_val</span><span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">tdox_3_plot</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">TimeFrame_Name</th>
<th align="left">TimeFrame_Value</th>
<th align="right">TDO_x_value</th>
<th align="right">min</th>
<th align="right">mean</th>
<th align="right">max</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Year</td>
<td align="left">2018</td>
<td align="right">3</td>
<td align="right">53.6602</td>
<td align="right">53.6602</td>
<td align="right">53.6602</td>
</tr>
<tr class="even">
<td align="left">Date</td>
<td align="left">2018-07-03</td>
<td align="right">3</td>
<td align="right">53.6602</td>
<td align="right">53.6602</td>
<td align="right">53.6602</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Plot</span>
<span class="co">## Temp, x-bottom, circles</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df_plot</span><span class="op">$</span><span class="va">temp_F</span>, <span class="va">df_plot</span><span class="op">$</span><span class="va">Depth</span>, col <span class="op">=</span> <span class="st">"black"</span>
     , ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">df_plot</span><span class="op">$</span><span class="va">Depth</span><span class="op">)</span><span class="op">)</span>
     , xlab <span class="op">=</span> <span class="st">"Temperature (F)"</span>, ylab <span class="op">=</span> <span class="st">"Depth (m)"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">df_plot</span><span class="op">$</span><span class="va">temp_F</span>, <span class="va">df_plot</span><span class="op">$</span><span class="va">Depth</span>, col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fl">53.66</span>, col <span class="op">=</span> <span class="st">"black"</span>, lty <span class="op">=</span> <span class="fl">3</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">## plot on top of existing plot</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>new<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="co">## Add DO</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df_plot</span><span class="op">$</span><span class="va">DO_conc</span>, <span class="va">df_plot</span><span class="op">$</span><span class="va">Depth</span>, col <span class="op">=</span> <span class="st">"blue"</span>, pch <span class="op">=</span> <span class="fl">17</span>
     , ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">df_plot</span><span class="op">$</span><span class="va">Depth</span><span class="op">)</span><span class="op">)</span>
     , xaxt <span class="op">=</span> <span class="st">"n"</span>, yaxt <span class="op">=</span> <span class="st">"n"</span>, xlab <span class="op">=</span> <span class="cn">NA</span>, ylab <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">df_plot</span><span class="op">$</span><span class="va">DO_conc</span>, <span class="va">df_plot</span><span class="op">$</span><span class="va">Depth</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/axis.html">axis</a></span><span class="op">(</span>side <span class="op">=</span> <span class="fl">3</span>, col.axis <span class="op">=</span> <span class="st">"blue"</span>, col.lab <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span><span class="op">(</span><span class="st">"Dissolved Oxygen (mg/L)"</span>, side <span class="op">=</span> <span class="fl">3</span>, line <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="st">"blue"</span>, lty <span class="op">=</span> <span class="fl">3</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">## Legend</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="st">"bottomright"</span>
      , <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Temperature"</span>, <span class="st">"Temp = 53.66 @ DO = 3"</span>, <span class="st">"Dissolved Oxygen"</span>, <span class="st">"DO = 3"</span><span class="op">)</span>
      , col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"blue"</span><span class="op">)</span>
      , pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">21</span>, <span class="cn">NA</span>, <span class="fl">17</span>, <span class="cn">NA</span><span class="op">)</span>
      , lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>
      , lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/plot_TDO3-1.png" width="512"></p>
</div>
<div id="export_rlakeanalyzer" class="section level2">
<h2 class="hasAnchor">
<a href="#export_rlakeanalyzer" class="anchor"></a>export_rLakeAnalyzer</h2>
<p>Reorganize file for use with <code>rLakeAnalyzer</code> package.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Convert Data for use with rLakeAnalyzer</span>

<span class="co"># Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>

<span class="co"># Columns, date listed first</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Measurement"</span><span class="op">)</span>
<span class="va">col_rLA</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"datetime"</span>, <span class="st">"wtr"</span><span class="op">)</span>

<span class="co"># Run function</span>
<span class="va">df_rLA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_rLakeAnalyzer.html">export_rLakeAnalyzer</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">col_depth</span>, <span class="va">col_data</span>, <span class="va">col_rLA</span><span class="op">)</span>

<span class="co">#</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">df_rLA</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    357 obs. of  28 variables:</span>
<span class="co">#&gt;  $ datetime: Date, format: "2017-01-19" "2017-01-20" ...</span>
<span class="co">#&gt;  $ wtr_2   : num  0.961 0.967 0.973 0.973 0.969 ...</span>
<span class="co">#&gt;  $ wtr_3   : num  1.07 1.08 1.08 1.09 1.1 ...</span>
<span class="co">#&gt;  $ wtr_4   : num  1.1 1.1 1.1 1.11 1.12 ...</span>
<span class="co">#&gt;  $ wtr_5   : num  1.14 1.14 1.14 1.15 1.16 ...</span>
<span class="co">#&gt;  $ wtr_6   : num  1.18 1.19 1.19 1.2 1.21 ...</span>
<span class="co">#&gt;  $ wtr_7   : num  1.25 1.25 1.26 1.27 1.27 ...</span>
<span class="co">#&gt;  $ wtr_8   : num  1.33 1.34 1.34 1.35 1.35 ...</span>
<span class="co">#&gt;  $ wtr_9   : num  1.4 1.41 1.42 1.42 1.42 ...</span>
<span class="co">#&gt;  $ wtr_10  : num  1.45 1.46 1.46 1.47 1.47 ...</span>
<span class="co">#&gt;  $ wtr_11  : num  1.48 1.49 1.49 1.5 1.52 ...</span>
<span class="co">#&gt;  $ wtr_12  : num  1.56 1.57 1.58 1.59 1.61 ...</span>
<span class="co">#&gt;  $ wtr_13  : num  1.65 1.66 1.69 1.69 1.71 ...</span>
<span class="co">#&gt;  $ wtr_14  : num  1.71 1.72 1.75 1.75 1.76 ...</span>
<span class="co">#&gt;  $ wtr_15  : num  1.74 1.76 1.78 1.78 1.79 ...</span>
<span class="co">#&gt;  $ wtr_16  : num  1.75 1.77 1.78 1.78 1.8 ...</span>
<span class="co">#&gt;  $ wtr_17  : num  1.79 1.8 1.8 1.81 1.83 ...</span>
<span class="co">#&gt;  $ wtr_18  : num  1.85 1.86 1.86 1.87 1.88 ...</span>
<span class="co">#&gt;  $ wtr_19  : num  1.9 1.9 1.9 1.91 1.91 ...</span>
<span class="co">#&gt;  $ wtr_20  : num  1.93 1.93 1.93 1.93 1.93 ...</span>
<span class="co">#&gt;  $ wtr_21  : num  1.91 1.91 1.91 1.91 1.91 ...</span>
<span class="co">#&gt;  $ wtr_22  : num  1.86 1.86 1.86 1.86 1.86 ...</span>
<span class="co">#&gt;  $ wtr_23  : num  1.91 1.91 1.91 1.91 1.91 ...</span>
<span class="co">#&gt;  $ wtr_24  : num  2.06 2.07 2.07 2.07 2.08 ...</span>
<span class="co">#&gt;  $ wtr_25  : num  2.16 2.18 2.18 2.18 2.19 ...</span>
<span class="co">#&gt;  $ wtr_26  : num  2.22 2.23 2.24 2.24 2.25 ...</span>
<span class="co">#&gt;  $ wtr_27  : num  2.33 2.35 2.35 2.36 2.37 ...</span>
<span class="co">#&gt;  $ wtr_28  : num  2.5 2.51 2.52 2.54 2.55 ...</span>

<span class="co">## Not run: </span>
<span class="co"># Save</span>
<span class="co">#write.csv(df_rLA, file.path(tempdir(), "example_rLA.csv"), row.names = FALSE)</span></code></pre></div>
</div>
</div>
<div id="rlakeanalyzer" class="section level1">
<h1 class="hasAnchor">
<a href="#rlakeanalyzer" class="anchor"></a>rLakeAnalyzer</h1>
<p>After exporting file format for <code>rLakeAnalyzer</code> can use the functions from that package.</p>
<div id="help" class="section level2">
<h2 class="hasAnchor">
<a href="#help" class="anchor"></a>Help</h2>
<pre><code>#&gt; approx.bathy : function (Zmax, lkeArea, Zmean = NULL, method = "cone", zinterval = 1, 
#&gt;     depths = seq(0, Zmax, by = zinterval))  
#&gt; buoyancy.freq : function (wtr, depths)  
#&gt; center.buoyancy : function (wtr, depths)  
#&gt; depth.filter : function (z0, run_length = 20, index = FALSE)  
#&gt; epi.temperature : function (wtr, depths, bthA, bthD)  
#&gt; get.offsets : function (data)  
#&gt; hypo.temperature : function (wtr, depths, bthA, bthD)  
#&gt; internal.energy : function (wtr, depths, bthA, bthD)  
#&gt; lake.number : function (bthA, bthD, uStar, St, metaT, metaB, averageHypoDense)  
#&gt; lake.number.plot : function (wtr, wnd, wh, bth)  
#&gt; layer.density : function (top, bottom, wtr, depths, bthA, bthD, sal = wtr * 0)  
#&gt; layer.temperature : function (top, bottom, wtr, depths, bthA, bthD)  
#&gt; load.bathy : function (fPath)  
#&gt; load.ts : function (fPath, tz = "GMT")  
#&gt; meta.depths : function (wtr, depths, slope = 0.1, seasonal = TRUE, mixed.cutoff = 1)  
#&gt; schmidt.plot : function (wtr, bth)  
#&gt; schmidt.stability : function (wtr, depths, bthA, bthD, sal = 0)  
#&gt; thermo.depth : function (wtr, depths, Smin = 0.1, seasonal = TRUE, index = FALSE, mixed.cutoff = 1)  
#&gt; ts.buoyancy.freq : function (wtr, at.thermo = TRUE, na.rm = FALSE, ...)  
#&gt; ts.center.buoyancy : function (wtr, na.rm = FALSE)  
#&gt; ts.internal.energy : function (wtr, bathy, na.rm = FALSE)  
#&gt; ts.lake.number : function (wtr, wnd, wnd.height, bathy, seasonal = TRUE)  
#&gt; ts.layer.temperature : function (wtr, top, bottom, bathy, na.rm = FALSE)  
#&gt; ts.meta.depths : function (wtr, slope = 0.1, na.rm = FALSE, ...)  
#&gt; ts.schmidt.stability : function (wtr, bathy, na.rm = FALSE)  
#&gt; ts.thermo.depth : function (wtr, Smin = 0.1, na.rm = FALSE, ...)  
#&gt; ts.uStar : function (wtr, wnd, wnd.height, bathy, seasonal = TRUE)  
#&gt; ts.wedderburn.number : function (wtr, wnd, wnd.height, bathy, Ao, seasonal = TRUE)  
#&gt; uStar : function (wndSpeed, wndHeight, averageEpiDense)  
#&gt; water.density : function (wtr, sal = wtr * 0)  
#&gt; wedderburn.number : function (delta_rho, metaT, uSt, Ao, AvHyp_rho)  
#&gt; whole.lake.temperature : function (wtr, depths, bthA, bthD)  
#&gt; wtr.heat.map : function (wtr, ...)  
#&gt; wtr.heatmap.layers : function (wtr, ...)  
#&gt; wtr.layer : function (data, depth, measure, thres = 0.1, z0 = 2.5, zmax = 150, nseg = "unconstrained")  
#&gt; wtr.lineseries : function (wtr, ylab = "Temperature C", ...)  
#&gt; wtr.plot.temp : function (wtr, ...)</code></pre>
</div>
<div id="approx-bathy" class="section level2">
<h2 class="hasAnchor">
<a href="#approx-bathy" class="anchor"></a>approx.bathy</h2>
<p>Estimate hypsography curve.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Voldev.ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/approx.bathy.html">approx.bathy</a></span><span class="op">(</span>Zmax <span class="op">=</span> <span class="fl">25</span>, Zmean <span class="op">=</span> <span class="fl">12</span>, lkeArea <span class="op">=</span> <span class="fl">39400000</span>, method <span class="op">=</span> <span class="st">"voldev"</span><span class="op">)</span>
<span class="va">Voldevshallow.ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/approx.bathy.html">approx.bathy</a></span><span class="op">(</span>Zmax <span class="op">=</span> <span class="fl">25</span>, Zmean <span class="op">=</span> <span class="fl">6</span>, lkeArea <span class="op">=</span> <span class="fl">39400000</span>, method <span class="op">=</span> <span class="st">"voldev"</span><span class="op">)</span>
<span class="va">Cone.ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/approx.bathy.html">approx.bathy</a></span><span class="op">(</span>Zmax <span class="op">=</span> <span class="fl">25</span>, lkeArea <span class="op">=</span> <span class="fl">39400000</span>, method <span class="op">=</span> <span class="st">"cone"</span><span class="op">)</span>

<span class="co"># plot depth-area curves</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">Cone.ex</span><span class="op">$</span><span class="va">depths</span> <span class="op">~</span> <span class="va">Cone.ex</span><span class="op">$</span><span class="va">Area.at.z</span>, xlab <span class="op">=</span> <span class="st">"Area (m^3)"</span>, ylab <span class="op">=</span> <span class="st">"Depth (m)"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">Voldev.ex</span><span class="op">$</span><span class="va">depths</span> <span class="op">~</span> <span class="va">Voldev.ex</span><span class="op">$</span><span class="va">Area.at.z</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">Voldevshallow.ex</span><span class="op">$</span><span class="va">depths</span> <span class="op">~</span> <span class="va">Voldevshallow.ex</span><span class="op">$</span><span class="va">Area.at.z</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/approx.bathy-1.png" width="512"></p>
</div>
<div id="buoyancy-freq" class="section level2">
<h2 class="hasAnchor">
<a href="#buoyancy-freq" class="anchor"></a>buoyancy.freq</h2>
<p>Calculate buoyancy frequency.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># A vector of water temperatures</span>
<span class="va">wtr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22.51</span>, <span class="fl">22.42</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.36</span>, <span class="fl">22.3</span>, <span class="fl">22.21</span>, <span class="fl">22.11</span>, <span class="fl">21.23</span>, <span class="fl">16.42</span>, 
    <span class="fl">15.15</span>, <span class="fl">14.24</span>, <span class="fl">13.35</span>, <span class="fl">10.94</span>, <span class="fl">10.43</span>, <span class="fl">10.36</span>, <span class="fl">9.94</span>, <span class="fl">9.45</span>, <span class="fl">9.1</span>, <span class="fl">8.91</span>, <span class="fl">8.58</span>, <span class="fl">8.43</span><span class="op">)</span>

<span class="co">#A vector defining the depths</span>
<span class="va">depths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">14</span>, <span class="fl">15</span>, <span class="fl">16</span>, 
    <span class="fl">17</span>, <span class="fl">18</span>, <span class="fl">19</span>, <span class="fl">20</span><span class="op">)</span>

<span class="va">b.f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/buoyancy.freq.html">buoyancy.freq</a></span><span class="op">(</span><span class="va">wtr</span>, <span class="va">depths</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">b.f</span>, <span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">b.f</span>, <span class="st">'depths'</span><span class="op">)</span>, type<span class="op">=</span><span class="st">'b'</span>
     , ylab<span class="op">=</span><span class="st">'Depth'</span>, xlab<span class="op">=</span><span class="st">'Buoyancy Frequency'</span>
     , ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">depths</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">depths</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/buoyancy.freq-1.png" width="512"></p>
</div>
<div id="center-buoyancy" class="section level2">
<h2 class="hasAnchor">
<a href="#center-buoyancy" class="anchor"></a>center.buoyancy</h2>
<p>Calculate the center of buoyancy.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># A vector of water temperatures</span>
<span class="va">wtr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22.51</span>, <span class="fl">22.42</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.36</span>, <span class="fl">22.3</span>, <span class="fl">22.21</span>, <span class="fl">22.11</span>, <span class="fl">21.23</span>, <span class="fl">16.42</span>, 
    <span class="fl">15.15</span>, <span class="fl">14.24</span>, <span class="fl">13.35</span>, <span class="fl">10.94</span>, <span class="fl">10.43</span>, <span class="fl">10.36</span>, <span class="fl">9.94</span>, <span class="fl">9.45</span>, <span class="fl">9.1</span>, <span class="fl">8.91</span>, <span class="fl">8.58</span>, <span class="fl">8.43</span><span class="op">)</span>

<span class="co">#A vector defining the depths</span>
<span class="va">depths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">14</span>, <span class="fl">15</span>, <span class="fl">16</span>, 
    <span class="fl">17</span>, <span class="fl">18</span>, <span class="fl">19</span>, <span class="fl">20</span><span class="op">)</span>

<span class="va">c.b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/center.buoyancy.html">center.buoyancy</a></span><span class="op">(</span><span class="va">wtr</span>, <span class="va">depths</span><span class="op">)</span>
<span class="va">c.b</span>
<span class="co">#&gt; [1] 8.885765</span></code></pre></div>
</div>
<div id="epi-temperature" class="section level2">
<h2 class="hasAnchor">
<a href="#epi-temperature" class="anchor"></a>epi.temperature</h2>
<p>Get volumetrically averaged epilimnion temp.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## No Example</span></code></pre></div>
</div>
<div id="hypo-temperature" class="section level2">
<h2 class="hasAnchor">
<a href="#hypo-temperature" class="anchor"></a>hypo.temperature</h2>
<p>Get volumetrically averaged hypolimnion temp.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">##No Example</span></code></pre></div>
</div>
<div id="internal-energy" class="section level2">
<h2 class="hasAnchor">
<a href="#internal-energy" class="anchor"></a>internal.energy</h2>
<p>Internal energy function (Joules).</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bthA</span>   <span class="op">&lt;-</span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>,<span class="fl">900</span>,<span class="fl">864</span>,<span class="fl">820</span>,<span class="fl">200</span>,<span class="fl">10</span><span class="op">)</span>
<span class="va">bthD</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2.3</span>,<span class="fl">2.5</span>,<span class="fl">4.2</span>,<span class="fl">5.8</span>,<span class="fl">7</span><span class="op">)</span>

<span class="va">wtr</span>    <span class="op">&lt;-</span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">28</span>,<span class="fl">27</span>,<span class="fl">26.4</span>,<span class="fl">26</span>,<span class="fl">25.4</span>,<span class="fl">24</span>,<span class="fl">23.3</span><span class="op">)</span>
<span class="va">depths</span> <span class="op">&lt;-</span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'Internal Energy for input is: '</span><span class="op">)</span>
<span class="co">#&gt; Internal Energy for input is:</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/internal.energy.html">internal.energy</a></span><span class="op">(</span><span class="va">wtr</span>, <span class="va">depths</span>, <span class="va">bthA</span>, <span class="va">bthD</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 520456577</span></code></pre></div>
</div>
<div id="lake-number" class="section level2">
<h2 class="hasAnchor">
<a href="#lake-number" class="anchor"></a>lake.number</h2>
<p>Calculate Lake Number.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bthA</span>    <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>,<span class="fl">900</span>,<span class="fl">864</span>,<span class="fl">820</span>,<span class="fl">200</span>,<span class="fl">10</span><span class="op">)</span>
<span class="va">bthD</span>    <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2.3</span>,<span class="fl">2.5</span>,<span class="fl">4.2</span>,<span class="fl">5.8</span>,<span class="fl">7</span><span class="op">)</span>
<span class="va">uStar</span>   <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.0032</span>,<span class="fl">0.0024</span><span class="op">)</span>
<span class="va">St</span>    <span class="op">&lt;-</span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">140</span>,<span class="fl">153</span><span class="op">)</span>
<span class="va">metaT</span>   <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.34</span>,<span class="fl">1.54</span><span class="op">)</span>
<span class="va">metaB</span>   <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4.32</span>,<span class="fl">4.33</span><span class="op">)</span>
<span class="va">averageHypoDense</span>    <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">999.3</span>,<span class="fl">999.32</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'Lake Number for input vector is: '</span><span class="op">)</span>
<span class="co">#&gt; Lake Number for input vector is:</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/lake.number.html">lake.number</a></span><span class="op">(</span> <span class="va">bthA</span>, <span class="va">bthD</span>, <span class="va">uStar</span>, <span class="va">St</span>, <span class="va">metaT</span>, <span class="va">metaB</span>, <span class="va">averageHypoDense</span><span class="op">)</span> <span class="op">)</span>
<span class="co">#&gt; 472.136 951.3076</span></code></pre></div>
</div>
<div id="layer-density" class="section level2">
<h2 class="hasAnchor">
<a href="#layer-density" class="anchor"></a>layer.density</h2>
<p>Returns the average density of a layer between two depths.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">top</span>     <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="va">bottom</span>  <span class="op">&lt;-</span> <span class="fl">6</span>
<span class="va">wtr</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25.2</span>,<span class="fl">25.1</span>,<span class="fl">24.1</span>,<span class="fl">22.0</span>,<span class="fl">19.8</span>,<span class="fl">15.3</span>,<span class="fl">12.0</span>,<span class="fl">11.1</span><span class="op">)</span>
<span class="va">depths</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span> 
<span class="va">bthA</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10000</span>,<span class="fl">8900</span>,<span class="fl">5000</span>,<span class="fl">3500</span>,<span class="fl">2000</span>,<span class="fl">1000</span>,<span class="fl">300</span>,<span class="fl">10</span><span class="op">)</span>
<span class="va">bthD</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/layer.density.html">layer.density</a></span><span class="op">(</span><span class="va">top</span>,<span class="va">bottom</span>,<span class="va">wtr</span>,<span class="va">depths</span>,<span class="va">bthA</span>,<span class="va">bthD</span><span class="op">)</span>
<span class="co">#&gt; [1] 997.9737</span></code></pre></div>
</div>
<div id="layer-temperature" class="section level2">
<h2 class="hasAnchor">
<a href="#layer-temperature" class="anchor"></a>layer.temperature</h2>
<p>Returns the average temperature of a layer between two depths.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Supply input data</span>
<span class="va">top</span>     <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="va">bottom</span>  <span class="op">&lt;-</span> <span class="fl">6</span>
<span class="va">wtr</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25.2</span>,<span class="fl">25.1</span>,<span class="fl">24.1</span>,<span class="fl">22.0</span>,<span class="fl">19.8</span>,<span class="fl">15.3</span>,<span class="fl">12.0</span>,<span class="fl">11.1</span><span class="op">)</span>
<span class="va">depths</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span> 
<span class="va">bthA</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10000</span>,<span class="fl">8900</span>,<span class="fl">5000</span>,<span class="fl">3500</span>,<span class="fl">2000</span>,<span class="fl">1000</span>,<span class="fl">300</span>,<span class="fl">10</span><span class="op">)</span>
<span class="va">bthD</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span>

<span class="co">#Return the average temperature of the water column between 2 and 6 meters.</span>
<span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/layer.temperature.html">layer.temperature</a></span><span class="op">(</span><span class="va">top</span>,<span class="va">bottom</span>,<span class="va">wtr</span>,<span class="va">depths</span>,<span class="va">bthA</span>,<span class="va">bthD</span><span class="op">)</span>
<span class="co">#&gt; [1] 21.02678</span></code></pre></div>
</div>
<div id="meta-depths" class="section level2">
<h2 class="hasAnchor">
<a href="#meta-depths" class="anchor"></a>meta.depths</h2>
<p>Calculate the Top and Bottom Depths of the Metalimnion.</p>
<p>To get the thickness of Metalimnion subtract the two values.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wtr</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22.51</span>, <span class="fl">22.42</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.36</span>, <span class="fl">22.3</span>, <span class="fl">22.21</span>, <span class="fl">22.11</span>, <span class="fl">21.23</span>, <span class="fl">16.42</span>, 
<span class="fl">15.15</span>, <span class="fl">14.24</span>, <span class="fl">13.35</span>, <span class="fl">10.94</span>, <span class="fl">10.43</span>, <span class="fl">10.36</span>, <span class="fl">9.94</span>, <span class="fl">9.45</span>, <span class="fl">9.1</span>, <span class="fl">8.91</span>, <span class="fl">8.58</span>, <span class="fl">8.43</span><span class="op">)</span>

<span class="va">depths</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">14</span>, <span class="fl">15</span>, <span class="fl">16</span>, 
             <span class="fl">17</span>, <span class="fl">18</span>, <span class="fl">19</span>, <span class="fl">20</span><span class="op">)</span>
             
<span class="va">m.d</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/meta.depths.html">meta.depths</a></span><span class="op">(</span><span class="va">wtr</span>, <span class="va">depths</span>, slope<span class="op">=</span><span class="fl">0.1</span>, seasonal<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'The top depth of the metalimnion is:'</span>, <span class="va">m.d</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; The top depth of the metalimnion is: 5.943727</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'The bottom depth of the metalimnion is:'</span>, <span class="va">m.d</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; The bottom depth of the metalimnion is: 11.0914</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"The thickness of the metalimnion is: "</span>, <span class="va">m.d</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">m.d</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; The thickness of the metalimnion is:  5.147674</span></code></pre></div>
</div>
<div id="schmidt-stability" class="section level2">
<h2 class="hasAnchor">
<a href="#schmidt-stability" class="anchor"></a>schmidt.stability</h2>
<p>Calculate the Schmidt stability.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bthA</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1000</span>,<span class="fl">900</span>,<span class="fl">864</span>,<span class="fl">820</span>,<span class="fl">200</span>,<span class="fl">10</span><span class="op">)</span>
<span class="va">bthD</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2.3</span>,<span class="fl">2.5</span>,<span class="fl">4.2</span>,<span class="fl">5.8</span>,<span class="fl">7</span><span class="op">)</span>

<span class="va">wtr</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">28</span>,<span class="fl">27</span>,<span class="fl">26.4</span>,<span class="fl">26</span>,<span class="fl">25.4</span>,<span class="fl">24</span>,<span class="fl">23.3</span><span class="op">)</span>
<span class="va">depths</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'Schmidt stability for input is: '</span><span class="op">)</span>
<span class="co">#&gt; Schmidt stability for input is:</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/schmidt.stability.html">schmidt.stability</a></span><span class="op">(</span><span class="va">wtr</span>, <span class="va">depths</span>, <span class="va">bthA</span>, <span class="va">bthD</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 23.76961</span></code></pre></div>
</div>
<div id="thermo-depth" class="section level2">
<h2 class="hasAnchor">
<a href="#thermo-depth" class="anchor"></a>thermo.depth</h2>
<p>Calculate depth of the thermocline from a temperature profile</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># A vector of water temperatures</span>
<span class="va">wtr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22.51</span>, <span class="fl">22.42</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.4</span>, <span class="fl">22.36</span>, <span class="fl">22.3</span>, <span class="fl">22.21</span>, <span class="fl">22.11</span>, <span class="fl">21.23</span>, <span class="fl">16.42</span>, 
        <span class="fl">15.15</span>, <span class="fl">14.24</span>, <span class="fl">13.35</span>, <span class="fl">10.94</span>, <span class="fl">10.43</span>, <span class="fl">10.36</span>, <span class="fl">9.94</span>, <span class="fl">9.45</span>, <span class="fl">9.1</span>, <span class="fl">8.91</span>, <span class="fl">8.58</span>, <span class="fl">8.43</span><span class="op">)</span>

<span class="co">#A vector defining the depths</span>
<span class="va">depths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">14</span>, <span class="fl">15</span>, <span class="fl">16</span>, 
   <span class="fl">17</span>, <span class="fl">18</span>, <span class="fl">19</span>, <span class="fl">20</span><span class="op">)</span>

<span class="va">t.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/thermo.depth.html">thermo.depth</a></span><span class="op">(</span><span class="va">wtr</span>, <span class="va">depths</span>, seasonal<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'The thermocline depth is:'</span>, <span class="va">t.d</span><span class="op">)</span>
<span class="co">#&gt; The thermocline depth is: 7.502121</span></code></pre></div>
</div>
<div id="ts-buoyancy-freq" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-buoyancy-freq" class="anchor"></a>ts.buoyancy.freq</h2>
<p>Calculate the buoyancy (Brunt-Vaisala) frequency for a temperature profile.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Get the path for the package example file included</span>
<span class="va">wtr.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>
                        , <span class="st">'Sparkling.daily.wtr'</span>
                        , package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>

<span class="co">#Load data for example lake, Sparkilng Lake, Wisconsin.</span>
<span class="va">sp.wtr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.ts.html">load.ts</a></span><span class="op">(</span><span class="va">wtr.path</span><span class="op">)</span>

<span class="va">N2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.buoyancy.freq.html">ts.buoyancy.freq</a></span><span class="op">(</span><span class="va">sp.wtr</span>, seasonal<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">SN2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.buoyancy.freq.html">ts.buoyancy.freq</a></span><span class="op">(</span><span class="va">sp.wtr</span>, seasonal<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">N2</span>, type<span class="op">=</span><span class="st">'l'</span>, ylab<span class="op">=</span><span class="st">'Buoyancy Frequency'</span>, xlab<span class="op">=</span><span class="st">'Date'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">SN2</span>, col<span class="op">=</span><span class="st">'red'</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.buoyancy.freq-1.png" width="512"></p>
<div id="ts-buoyancy-freq-lakemonitor" class="section level3">
<h3 class="hasAnchor">
<a href="#ts-buoyancy-freq-lakemonitor" class="anchor"></a>ts.buoyancy.freq, LakeMonitoR</h3>
<p>Using LakeMonitoR data.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Convert Data for use with rLakeAnalyzer</span>

<span class="co"># Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>

<span class="co"># Columns, date listed first</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Measurement"</span><span class="op">)</span>
<span class="va">col_rLA</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"datetime"</span>, <span class="st">"wtr"</span><span class="op">)</span>

<span class="co"># Run function</span>
<span class="va">df_rLA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_rLakeAnalyzer.html">export_rLakeAnalyzer</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">col_depth</span>, <span class="va">col_data</span>, <span class="va">col_rLA</span><span class="op">)</span>

<span class="co"># Calculate</span>
<span class="va">N2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.buoyancy.freq.html">ts.buoyancy.freq</a></span><span class="op">(</span><span class="va">df_rLA</span>, seasonal<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">SN2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.buoyancy.freq.html">ts.buoyancy.freq</a></span><span class="op">(</span><span class="va">df_rLA</span>, seasonal<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">N2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">datetime</th>
<th align="right">n2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2017-01-19</td>
<td align="right">5.38e-05</td>
</tr>
<tr class="even">
<td align="left">2017-01-20</td>
<td align="right">5.33e-05</td>
</tr>
<tr class="odd">
<td align="left">2017-01-21</td>
<td align="right">5.38e-05</td>
</tr>
<tr class="even">
<td align="left">2017-01-22</td>
<td align="right">5.68e-05</td>
</tr>
<tr class="odd">
<td align="left">2017-01-23</td>
<td align="right">6.34e-05</td>
</tr>
<tr class="even">
<td align="left">2017-01-24</td>
<td align="right">6.77e-05</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">SN2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">datetime</th>
<th align="right">n2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2017-01-19</td>
<td align="right">5.38e-05</td>
</tr>
<tr class="even">
<td align="left">2017-01-20</td>
<td align="right">5.33e-05</td>
</tr>
<tr class="odd">
<td align="left">2017-01-21</td>
<td align="right">5.38e-05</td>
</tr>
<tr class="even">
<td align="left">2017-01-22</td>
<td align="right">5.68e-05</td>
</tr>
<tr class="odd">
<td align="left">2017-01-23</td>
<td align="right">6.34e-05</td>
</tr>
<tr class="even">
<td align="left">2017-01-24</td>
<td align="right">6.77e-05</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">N2</span>, type<span class="op">=</span><span class="st">'l'</span>, ylab<span class="op">=</span><span class="st">'Buoyancy Frequency'</span>, xlab<span class="op">=</span><span class="st">'Date'</span>, lwd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">SN2</span>, col<span class="op">=</span><span class="st">'red'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>
       , legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"N2"</span>, <span class="st">"SN2"</span><span class="op">)</span>
       , col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"red"</span><span class="op">)</span>
       , lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/unnamed-chunk-3-1.png" width="512"></p>
</div>
</div>
<div id="ts-center-buoyancy" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-center-buoyancy" class="anchor"></a>ts.center.buoyancy</h2>
<p>Calculates the center of buoyancy for multiple temperature profiles.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Get the path for the package example file included</span>
<span class="va">wtr.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'Sparkling.daily.wtr'</span>, package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>

<span class="co">#Load data for example lake, Sparkilng Lake, Wisconsin.</span>
<span class="va">sp.wtr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.ts.html">load.ts</a></span><span class="op">(</span><span class="va">wtr.path</span><span class="op">)</span>
 
<span class="co">#calculate and plot the thermocline depth</span>
<span class="va">t.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.thermo.depth.html">ts.thermo.depth</a></span><span class="op">(</span><span class="va">sp.wtr</span><span class="op">)</span>

<span class="va">center.N2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.center.buoyancy.html">ts.center.buoyancy</a></span><span class="op">(</span><span class="va">sp.wtr</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">center.N2</span>, type<span class="op">=</span><span class="st">'l'</span>, ylab<span class="op">=</span><span class="st">'Depth (m)'</span>, xlab<span class="op">=</span><span class="st">'Date'</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">19</span>,<span class="fl">0</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">t.d</span>, type<span class="op">=</span><span class="st">'l'</span>, col<span class="op">=</span><span class="st">'red'</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">t.d</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">]</span>, y <span class="op">=</span> <span class="fl">.25</span>,
   <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'center of buoyancy'</span>,<span class="st">'thermocline depth'</span><span class="op">)</span>,
   lty<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>,
   lwd<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.5</span>,<span class="fl">1.5</span><span class="op">)</span>,col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>,<span class="st">"red"</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.center.buoyancy-1.png" width="512"></p>
<div id="ts-center-buoyancy-lakemonitor" class="section level3">
<h3 class="hasAnchor">
<a href="#ts-center-buoyancy-lakemonitor" class="anchor"></a>ts.center.buoyancy, LakeMonitoR</h3>
<p>Using LakeMonitoR data.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Convert Data for use with rLakeAnalyzer</span>

<span class="co"># Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>

<span class="co"># Columns, date listed first</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Measurement"</span><span class="op">)</span>
<span class="va">col_rLA</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"datetime"</span>, <span class="st">"wtr"</span><span class="op">)</span>

<span class="co"># Run function</span>
<span class="va">df_rLA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_rLakeAnalyzer.html">export_rLakeAnalyzer</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">col_depth</span>, <span class="va">col_data</span>, <span class="va">col_rLA</span><span class="op">)</span>

<span class="co"># Calculate</span>
<span class="va">t.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.thermo.depth.html">ts.thermo.depth</a></span><span class="op">(</span><span class="va">df_rLA</span><span class="op">)</span>

<span class="va">center.N2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.center.buoyancy.html">ts.center.buoyancy</a></span><span class="op">(</span><span class="va">df_rLA</span><span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">center.N2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">datetime</th>
<th align="right">cent.n2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2017-01-19</td>
<td align="right">14.53531</td>
</tr>
<tr class="even">
<td align="left">2017-01-20</td>
<td align="right">14.52814</td>
</tr>
<tr class="odd">
<td align="left">2017-01-21</td>
<td align="right">14.56947</td>
</tr>
<tr class="even">
<td align="left">2017-01-22</td>
<td align="right">14.55145</td>
</tr>
<tr class="odd">
<td align="left">2017-01-23</td>
<td align="right">14.43304</td>
</tr>
<tr class="even">
<td align="left">2017-01-24</td>
<td align="right">14.26047</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">plot_cb_y_max</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">center.N2</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                             , <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">t.d</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                             , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">center.N2</span>
     , type <span class="op">=</span> <span class="st">'l'</span>
     , ylab <span class="op">=</span> <span class="st">'Depth (m)'</span>
     , xlab <span class="op">=</span> <span class="st">'Date'</span>
     , ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">plot_cb_y_max</span>, <span class="fl">0</span><span class="op">)</span>
     , lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">t.d</span>, type <span class="op">=</span> <span class="st">'l'</span>, col <span class="op">=</span> <span class="st">'red'</span>, lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,
   <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'center of buoyancy'</span>,<span class="st">'thermocline depth'</span><span class="op">)</span>,
   lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
   lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.5</span><span class="op">)</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>,<span class="st">"red"</span><span class="op">)</span>, bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/unnamed-chunk-4-1.png" width="512"></p>
</div>
</div>
<div id="ts-internal-energy" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-internal-energy" class="anchor"></a>ts.internal.energy</h2>
<p>Calculate physical indices for a timeseries.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># No Example</span></code></pre></div>
</div>
<div id="ts-lake-number" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-lake-number" class="anchor"></a>ts.lake.number</h2>
<p>Calculate physical indices for a timeseries.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># No Example</span></code></pre></div>
</div>
<div id="ts-layer-temperature" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-layer-temperature" class="anchor"></a>ts.layer.temperature</h2>
<p>Calculate volume-weighted average water temperature across a range of depths for a timeseries.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Get the path for the package example file included</span>
<span class="va">wtr.path</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'Sparkling.daily.wtr'</span>, package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>
<span class="va">bathy.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'Sparkling.bth'</span>, package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>

<span class="co">#Load data for example lake, Sparkilng lake, in Wisconsin.</span>
<span class="va">sp.wtr</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.ts.html">load.ts</a></span><span class="op">(</span><span class="va">wtr.path</span><span class="op">)</span>
<span class="va">sp.bathy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.bathy.html">load.bathy</a></span><span class="op">(</span><span class="va">bathy.path</span><span class="op">)</span>


<span class="va">l.t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.layer.temperature.html">ts.layer.temperature</a></span><span class="op">(</span><span class="va">sp.wtr</span>, <span class="fl">0</span>, <span class="fl">18</span>, <span class="va">sp.bathy</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">l.t</span><span class="op">$</span><span class="va">datetime</span>, <span class="va">l.t</span><span class="op">$</span><span class="va">layer.temp</span>, type<span class="op">=</span><span class="st">'l'</span>, 
      ylab<span class="op">=</span><span class="st">'Volumetrically averaged lake temperature'</span>, xlab<span class="op">=</span><span class="st">'Date'</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.layer.temperature-1.png" width="512"></p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ggplot</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">l.t</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">layer.temp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Volumetrically averaged lake temperature"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.layer.temperature-2.png" width="512"></p>
</div>
<div id="ts-meta-depths" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-meta-depths" class="anchor"></a>ts.meta.depths</h2>
<p>Calculate physical indices for a timeseries.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Get the path for the package example file included</span>
<span class="va">exampleFilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>
                               , <span class="st">'Sparkling.daily.wtr'</span>
                               , package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>

<span class="co">#Load</span>
<span class="va">sparkling.temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.ts.html">load.ts</a></span><span class="op">(</span><span class="va">exampleFilePath</span><span class="op">)</span>

<span class="co"># Calculate and plot the metalimnion depths</span>
<span class="va">m.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.meta.depths.html">ts.meta.depths</a></span><span class="op">(</span><span class="va">sparkling.temp</span><span class="op">)</span>
<span class="va">m.d</span><span class="op">$</span><span class="va">thickness</span> <span class="op">&lt;-</span> <span class="va">m.d</span><span class="op">$</span><span class="va">bottom</span> <span class="op">-</span> <span class="va">m.d</span><span class="op">$</span><span class="va">top</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">m.d</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">datetime</th>
<th align="right">top</th>
<th align="right">bottom</th>
<th align="right">thickness</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2009-05-02 10:00:00</td>
<td align="right">7.543954</td>
<td align="right">7.543954</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">2009-05-03 10:00:00</td>
<td align="right">7.488136</td>
<td align="right">7.488136</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">2009-05-04 10:00:00</td>
<td align="right">7.259722</td>
<td align="right">7.259722</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">2009-05-05 10:00:00</td>
<td align="right">4.585259</td>
<td align="right">4.585259</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">2009-05-06 10:00:00</td>
<td align="right">6.878275</td>
<td align="right">6.878275</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">2009-05-07 10:00:00</td>
<td align="right">2.386936</td>
<td align="right">2.386936</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">2009-05-08 10:00:00</td>
<td align="right">2.533029</td>
<td align="right">3.174465</td>
<td align="right">0.6414363</td>
</tr>
<tr class="even">
<td align="left">2009-05-09 10:00:00</td>
<td align="right">3.209228</td>
<td align="right">4.311154</td>
<td align="right">1.1019260</td>
</tr>
<tr class="odd">
<td align="left">2009-05-10 10:00:00</td>
<td align="right">3.534072</td>
<td align="right">4.543989</td>
<td align="right">1.0099178</td>
</tr>
<tr class="even">
<td align="left">2009-05-11 10:00:00</td>
<td align="right">3.769027</td>
<td align="right">4.788044</td>
<td align="right">1.0190164</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">m.d</span><span class="op">$</span><span class="va">datetime</span>
     , <span class="va">m.d</span><span class="op">$</span><span class="va">top</span>
     , type<span class="op">=</span><span class="st">'l'</span>
     , ylab<span class="op">=</span><span class="st">'Meta Depths (m)'</span>
     , xlab<span class="op">=</span><span class="st">'Date'</span>
     , col<span class="op">=</span><span class="st">'blue'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">m.d</span><span class="op">$</span><span class="va">datetime</span>, <span class="va">m.d</span><span class="op">$</span><span class="va">bottom</span>, col<span class="op">=</span><span class="st">'red'</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.meta.depths-1.png" width="512"></p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ggplot</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">m.d</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">top</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Meta Depths (m)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">m.d</span>
                     , <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">bottom</span><span class="op">)</span>
                     , color <span class="op">=</span> <span class="st">"red"</span>
                     , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.meta.depths-2.png" width="512"></p>
<div id="ts-meta-depths-lakemonitor" class="section level3">
<h3 class="hasAnchor">
<a href="#ts-meta-depths-lakemonitor" class="anchor"></a>ts.meta.depths, LakeMonitoR</h3>
<p>Using LakeMonitoR data.</p>
<p>Then calculate for epilimnion and hypolimnion temp difference.</p>
<p>Red is hypolimnion and blue is metalimnion.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:xts':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     first, last</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>

<span class="co"># Convert Data for use with rLakeAnalyzer</span>

<span class="co"># Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>

<span class="co"># Columns, date listed first</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Measurement"</span><span class="op">)</span>
<span class="va">col_rLA</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"datetime"</span>, <span class="st">"wtr"</span><span class="op">)</span>

<span class="co"># Run function</span>
<span class="va">df_rLA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_rLakeAnalyzer.html">export_rLakeAnalyzer</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">col_depth</span>, <span class="va">col_data</span>, <span class="va">col_rLA</span><span class="op">)</span>

<span class="co"># Calculate</span>
<span class="va">m.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.meta.depths.html">ts.meta.depths</a></span><span class="op">(</span><span class="va">df_rLA</span><span class="op">)</span>
<span class="va">m.d</span><span class="op">$</span><span class="va">thickness</span> <span class="op">&lt;-</span> <span class="va">m.d</span><span class="op">$</span><span class="va">bottom</span> <span class="op">-</span> <span class="va">m.d</span><span class="op">$</span><span class="va">top</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">m.d</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">datetime</th>
<th align="right">top</th>
<th align="right">bottom</th>
<th align="right">thickness</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2017-01-19</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2017-01-20</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2017-01-21</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2017-01-22</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2017-01-23</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2017-01-24</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2017-01-25</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2017-01-26</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2017-01-27</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2017-01-28</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ggplot</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">m.d</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">top</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Meta Depths (m)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">m.d</span>
                     , <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">bottom</span><span class="op">)</span>
                     , color <span class="op">=</span> <span class="st">"red"</span>
                     , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_reverse</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/unnamed-chunk-5-1.png" width="512"></p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># temp diff epi and hypo</span>
<span class="va">df_merge</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">m.d</span>, by.x <span class="op">=</span> <span class="st">"Date"</span>, by.y <span class="op">=</span> <span class="st">"datetime"</span><span class="op">)</span>

<span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Epi"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Depth"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">df_merge</span><span class="op">[</span>,  <span class="st">"top"</span><span class="op">]</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Meta"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Hypo"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Depth"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">df_merge</span><span class="op">[</span>,  <span class="st">"bottom"</span><span class="op">]</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Meta"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Epi"</span><span class="op">]</span> <span class="op">+</span> <span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Hypo"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Layer"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Epi"</span><span class="op">]</span> <span class="op">==</span> <span class="cn">TRUE</span>
                            , <span class="st">"Epi"</span>
                            , <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Meta"</span><span class="op">]</span> <span class="op">==</span>  <span class="cn">TRUE</span>
                                  , <span class="st">"Meta"</span>
                                  , <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Hypo"</span><span class="op">]</span> <span class="op">==</span>  <span class="cn">TRUE</span>
                                          , <span class="st">"Hypo"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">col_datetime</span> <span class="op">&lt;-</span> <span class="st">"Date"</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_measure</span> <span class="op">&lt;-</span> <span class="st">"Measurement"</span>
<span class="va">col_layer</span> <span class="op">&lt;-</span> <span class="st">"Layer"</span>

<span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Layer"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">df_merge</span><span class="op">[</span>, <span class="st">"Layer"</span><span class="op">]</span>
                               , levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Epi"</span>, <span class="st">"Meta"</span>, <span class="st">"Hypo"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>

<span class="va">stats_layers</span> <span class="op">&lt;-</span> <span class="va">df_merge</span> <span class="op">%&gt;%</span>
      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_datetime</span><span class="op">]</span><span class="op">]</span>, <span class="va">.data</span><span class="op">[[</span><span class="va">col_layer</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>
      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>.groups <span class="op">=</span> <span class="st">"keep"</span>
                       <span class="co">#, groupname = col_datetime</span>
                       , n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
                       , ndays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_datetime</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
                       , mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , median <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                                , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , range <span class="op">=</span> <span class="va">max</span> <span class="op">-</span> <span class="va">min</span>
                       , sd <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , var <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">var</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , cv <span class="op">=</span> <span class="va">sd</span><span class="op">/</span><span class="va">mean</span>
                       , q01 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.01</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q05 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.05</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q10 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.10</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q25 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.25</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q50 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.50</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q75 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.75</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q90 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.90</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q95 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.95</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       , q99 <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">col_measure</span><span class="op">]</span><span class="op">]</span>
                                               , probs <span class="op">=</span> <span class="fl">.99</span>
                                               , na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
                       <span class="co">#, n_below = sum(.data[["below"]], na.rm = TRUE)</span>
      <span class="op">)</span>

<span class="co"># pivot wider, min layer temp</span>

<span class="va">layers_min</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span><span class="va">stats_layers</span>
                          , id_cols <span class="op">=</span> <span class="st">"Date"</span>
                          , names_from <span class="op">=</span> <span class="st">"Layer"</span>
                          , names_sort <span class="op">=</span> <span class="cn">TRUE</span>
                          , values_from <span class="op">=</span> <span class="st">"min"</span><span class="op">)</span>

<span class="va">layers_min</span><span class="op">[</span>, <span class="st">"diff_EH"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">layers_min</span><span class="op">[</span>, <span class="st">"Hypo"</span><span class="op">]</span> <span class="op">-</span> <span class="va">layers_min</span><span class="op">[</span>, <span class="st">"Epi"</span><span class="op">]</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">layers_min</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 6</span>
<span class="co">#&gt; # Groups:   Date [6]</span>
<span class="co">#&gt;   Date         Epi  Meta  Hypo  `NA` diff_EH</span>
<span class="co">#&gt;   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2017-01-19 0.961    NA  1.07    NA   0.110</span>
<span class="co">#&gt; 2 2017-01-20 0.967    NA  1.08    NA   0.109</span>
<span class="co">#&gt; 3 2017-01-21 0.973    NA  1.08    NA   0.111</span>
<span class="co">#&gt; 4 2017-01-22 0.973    NA  1.09    NA   0.117</span>
<span class="co">#&gt; 5 2017-01-23 0.969    NA  1.10    NA   0.131</span>
<span class="co">#&gt; 6 2017-01-24 0.960    NA  1.10    NA   0.139</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">layers_min</span><span class="op">$</span><span class="va">diff_EH</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/unnamed-chunk-5-2.png" width="512"></p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">layers_min</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Date</span>, y <span class="op">=</span> <span class="va">diff_EH</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>
                , y <span class="op">=</span> <span class="st">"Temperature Difference (C)"</span>
                , title <span class="op">=</span> <span class="st">"Comparison of Epilimnion and Hypolimnion"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span>  </code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/unnamed-chunk-5-3.png" width="512"></p>
</div>
</div>
<div id="ts-schmidt-stability" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-schmidt-stability" class="anchor"></a>ts.schmidt.stability</h2>
<p>Calculate physical indices for a timeseries.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># No Example</span></code></pre></div>
<div id="ts-schmidt-stability-lakemonitor" class="section level3">
<h3 class="hasAnchor">
<a href="#ts-schmidt-stability-lakemonitor" class="anchor"></a>ts.schmidt.stability, LakeMonitor</h3>
<p>Using LakeMonitoR data. Requires bathymetry data.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Convert Data for use with rLakeAnalyzer</span>

<span class="co"># Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>
<span class="va">bathy</span> <span class="op">&lt;-</span> <span class="cn">NA</span>

<span class="co"># Columns, date listed first</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Measurement"</span><span class="op">)</span>
<span class="va">col_rLA</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"datetime"</span>, <span class="st">"wtr"</span><span class="op">)</span>

<span class="co"># Run function</span>
<span class="va">df_rLA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_rLakeAnalyzer.html">export_rLakeAnalyzer</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">col_depth</span>, <span class="va">col_data</span>, <span class="va">col_rLA</span><span class="op">)</span>


<span class="co"># Calculate</span>
<span class="va">s.s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.schmidt.stability.html">ts.schmidt.stability</a></span><span class="op">(</span><span class="va">df_rLA</span>, <span class="va">bathy</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="ts-thermo-depth" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-thermo-depth" class="anchor"></a>ts.thermo.depth</h2>
<p>Calculate physical indices for a timeseries.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Get the path for the package example file included</span>
<span class="va">exampleFilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'Sparkling.daily.wtr'</span>, package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>

<span class="co">#Load</span>
<span class="va">sparkling.temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.ts.html">load.ts</a></span><span class="op">(</span><span class="va">exampleFilePath</span><span class="op">)</span>


<span class="co">#calculate and plot the thermocline depth</span>
<span class="va">t.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.thermo.depth.html">ts.thermo.depth</a></span><span class="op">(</span><span class="va">sparkling.temp</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">t.d</span><span class="op">$</span><span class="va">datetime</span>, <span class="va">t.d</span><span class="op">$</span><span class="va">thermo.depth</span>, type<span class="op">=</span><span class="st">'l'</span>, ylab<span class="op">=</span><span class="st">'Thermocline Depth (m)'</span>, xlab<span class="op">=</span><span class="st">'Date'</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.thermo.depth-1.png" width="512"></p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ggplot</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">t.d</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">thermo.depth</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Thermocline Depth (m)"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.thermo.depth-2.png" width="512"></p>
<div id="ts-thermo-depth-lakemonitor" class="section level3">
<h3 class="hasAnchor">
<a href="#ts-thermo-depth-lakemonitor" class="anchor"></a>ts.thermo.depth, LakeMonitoR</h3>
<p>Using LakeMonitoR data.</p>
<p>For ggplot reverse the y-axis.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leppott/LakeMonitoR">LakeMonitoR</a></span><span class="op">)</span>

<span class="co"># Convert Data for use with rLakeAnalyzer</span>

<span class="co"># Data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">laketemp_ddm</span>

<span class="co"># Columns, date listed first</span>
<span class="va">col_depth</span> <span class="op">&lt;-</span> <span class="st">"Depth"</span>
<span class="va">col_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Measurement"</span><span class="op">)</span>
<span class="va">col_rLA</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"datetime"</span>, <span class="st">"wtr"</span><span class="op">)</span>

<span class="co"># Run function</span>
<span class="va">df_rLA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_rLakeAnalyzer.html">export_rLakeAnalyzer</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">col_depth</span>, <span class="va">col_data</span>, <span class="va">col_rLA</span><span class="op">)</span>

<span class="co"># Calculate</span>
<span class="va">t.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.thermo.depth.html">ts.thermo.depth</a></span><span class="op">(</span><span class="va">df_rLA</span><span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">t.d</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">datetime</th>
<th align="right">thermo.depth</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2017-01-19</td>
<td align="right">2.5</td>
</tr>
<tr class="even">
<td align="left">2017-01-20</td>
<td align="right">2.5</td>
</tr>
<tr class="odd">
<td align="left">2017-01-21</td>
<td align="right">2.5</td>
</tr>
<tr class="even">
<td align="left">2017-01-22</td>
<td align="right">2.5</td>
</tr>
<tr class="odd">
<td align="left">2017-01-23</td>
<td align="right">2.5</td>
</tr>
<tr class="even">
<td align="left">2017-01-24</td>
<td align="right">2.5</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">t.d</span><span class="op">$</span><span class="va">datetime</span>, <span class="va">t.d</span><span class="op">$</span><span class="va">thermo.depth</span>, type<span class="op">=</span><span class="st">'l'</span>, ylab<span class="op">=</span><span class="st">'Thermocline Depth (m)'</span>, xlab<span class="op">=</span><span class="st">'Date'</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/unnamed-chunk-7-1.png" width="512"></p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ggplot</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">t.d</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">thermo.depth</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Thermocline Depth (m)"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_reverse</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/unnamed-chunk-7-2.png" width="512"></p>
</div>
</div>
<div id="ts-ustar" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-ustar" class="anchor"></a>ts.uStar</h2>
<p>Calculate physical indices for a timeseries.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># No Example</span></code></pre></div>
</div>
<div id="ts-wedderburn-number" class="section level2">
<h2 class="hasAnchor">
<a href="#ts-wedderburn-number" class="anchor"></a>ts.wedderburn.number</h2>
<p>Calculate Wedderburn number for a timeseries.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Get the path for the package example file included</span>
<span class="va">wtr.path</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'Sparkling.daily.wtr'</span>, package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>
<span class="va">wnd.path</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'Sparkling.daily.wnd'</span>, package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>
<span class="va">bathy.path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'Sparkling.bth'</span>, package<span class="op">=</span><span class="st">"rLakeAnalyzer"</span><span class="op">)</span>

<span class="co">#Load data for example lake, Sparkilng lake, in Wisconsin.</span>
<span class="va">sp.wtr</span>   <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.ts.html">load.ts</a></span><span class="op">(</span><span class="va">wtr.path</span><span class="op">)</span>
<span class="va">sp.wnd</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.ts.html">load.ts</a></span><span class="op">(</span><span class="va">wnd.path</span><span class="op">)</span>
<span class="va">sp.bathy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/load.bathy.html">load.bathy</a></span><span class="op">(</span><span class="va">bathy.path</span><span class="op">)</span>

<span class="va">sp.area</span> <span class="op">=</span> <span class="fl">64e4</span>  <span class="co">#Area of Sparkling lake in m^2</span>
<span class="va">wnd.height</span> <span class="op">=</span> <span class="fl">2</span>  <span class="co">#Height of Sparkling lake anemometer</span>

<span class="va">w.n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/ts.wedderburn.number.html">ts.wedderburn.number</a></span><span class="op">(</span><span class="va">sp.wtr</span>, <span class="va">sp.wnd</span>, <span class="va">wnd.height</span>, <span class="va">sp.bathy</span>, <span class="va">sp.area</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">w.n</span><span class="op">$</span><span class="va">datetime</span>, <span class="va">w.n</span><span class="op">$</span><span class="va">wedderburn.number</span>, type<span class="op">=</span><span class="st">'l'</span>, ylab<span class="op">=</span><span class="st">'Wedderburn Number'</span>, xlab<span class="op">=</span><span class="st">'Date'</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.wedderburn.number-1.png" width="512"></p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ggplot</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">w.n</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">wedderburn.number</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Wedderburn Number"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/ts.wedderburn.number-2.png" width="512"></p>
</div>
<div id="ustar" class="section level2">
<h2 class="hasAnchor">
<a href="#ustar" class="anchor"></a>uStar</h2>
<p>Calculates the water friction velocity, uStar.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wndSpeed</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5.1</span>,<span class="fl">6.3</span>,<span class="fl">6.3</span>,<span class="fl">5.2</span>,<span class="fl">7</span>,<span class="fl">7.2</span><span class="op">)</span>
<span class="va">wndHeight</span>   <span class="op">&lt;-</span>  <span class="fl">2</span>
<span class="va">averageEpiDense</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">14</span>,<span class="fl">15</span>,<span class="fl">14.2</span>,<span class="fl">13</span>,<span class="fl">12</span>,<span class="fl">12</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'uStar for input vector is: '</span><span class="op">)</span>
<span class="co">#&gt; uStar for input vector is:</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/uStar.html">uStar</a></span><span class="op">(</span><span class="va">wndSpeed</span>,<span class="va">wndHeight</span>,<span class="va">averageEpiDense</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 0.06850371 0.08175285 0.08402419 0.07248358 0.1015583 0.10446</span></code></pre></div>
</div>
<div id="water-density" class="section level2">
<h2 class="hasAnchor">
<a href="#water-density" class="anchor"></a>water.density</h2>
<p>Estimate Water Density.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Plot water density for water between 1 and 30 deg C</span>
<span class="va">dens</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/water.density.html">water.density</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">30</span>, <span class="va">dens</span>, xlab<span class="op">=</span><span class="st">"Temp(deg C)"</span>, ylab<span class="op">=</span><span class="st">"Density(kg/m^3)"</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/water.density-1.png" width="512"></p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ggplot</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span>, y <span class="op">=</span> <span class="va">dens</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Temp (deg C)"</span>, y <span class="op">=</span> <span class="st">"Density (kg/m^3)"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="LakeMonitoR_files/figure-html/water.density-2.png" width="512"></p>
</div>
<div id="wedderburn-number" class="section level2">
<h2 class="hasAnchor">
<a href="#wedderburn-number" class="anchor"></a>wedderburn.number</h2>
<p>Calculates Wedderburn Number for a lake.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">delta_rho</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3.1</span>,<span class="fl">1.5</span><span class="op">)</span>
<span class="va">metaT</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5.5</span>,<span class="fl">2.4</span><span class="op">)</span>
<span class="va">uSt</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.0028</span>,<span class="fl">0.0032</span><span class="op">)</span>
<span class="va">Ao</span>        <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">80300</span>,<span class="fl">120000</span><span class="op">)</span>
<span class="va">AvHyp_rho</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">999.31</span>,<span class="fl">999.1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/wedderburn.number.html">wedderburn.number</a></span><span class="op">(</span><span class="va">delta_rho</span>, <span class="va">metaT</span>, <span class="va">uSt</span>, <span class="va">Ao</span>, <span class="va">AvHyp_rho</span><span class="op">)</span>
<span class="co">#&gt; [1] 367.22053  21.19474</span></code></pre></div>
</div>
<div id="whole-lake-temperature" class="section level2">
<h2 class="hasAnchor">
<a href="#whole-lake-temperature" class="anchor"></a>whole.lake.temperature</h2>
<p>Get volumetrically averaged whole lake temperature.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># No Example</span></code></pre></div>
</div>
<div id="wtr-layer" class="section level2">
<h2 class="hasAnchor">
<a href="#wtr-layer" class="anchor"></a>wtr.layer</h2>
<p>Exploration of lake water column layers.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"latesummer"</span><span class="op">)</span>
<span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/wtr.layer.html">wtr.layer</a></span><span class="op">(</span>depth<span class="op">=</span><span class="va">latesummer</span><span class="op">$</span><span class="va">depth</span>, measure <span class="op">=</span> <span class="va">latesummer</span><span class="op">$</span><span class="va">temper</span><span class="op">)</span>
<span class="va">df1</span><span class="op">$</span><span class="va">mld</span>
<span class="co">#&gt; [1] 7.0565</span>
<span class="va">df1</span><span class="op">$</span><span class="va">segments</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt;   segment_depth segment_measure</span>
<span class="co">#&gt; 1        2.5980        17.94060</span>
<span class="co">#&gt; 2        7.0565        17.38405</span>
<span class="co">#&gt; 3       25.7240         5.51445</span>
<span class="co">#&gt; 4       98.1390         4.46375</span>

<span class="fu"><a href="https://rdrr.io/pkg/rLakeAnalyzer/man/wtr.layer.html">wtr.layer</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">latesummer</span>, depth<span class="op">=</span><span class="va">depth</span>, measure <span class="op">=</span> <span class="va">temper</span>, nseg<span class="op">=</span><span class="fl">4</span><span class="op">)</span>
<span class="co">#&gt;   min_depth nseg    mld    cline</span>
<span class="co">#&gt; 1       2.5    4 7.0565 16.39025</span>
<span class="co">#&gt;                                                                     segments</span>
<span class="co">#&gt; 1 2.59800, 7.05650, 25.72400, 98.13900, 17.94060, 17.38405, 5.51445, 4.46375</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Erik W Leppo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
